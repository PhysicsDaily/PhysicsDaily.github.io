---
layout: base.njk
pagination:
  data: quizzes
  size: 1
  alias: quiz
  resolve: keys
permalink: "/{{ quiz }}/quiz/"
eleventyComputed:
  title: "{{ quizzes[quiz].title }} Quiz"
  topic: "{{ quizzes[quiz].topic }}"
---
    <main class="quiz-container container">
        <header class="quiz-header">
            <h1>{{ quizzes[quiz].title }} Quiz</h1>
            <p class="quiz-subtitle">{{ quizzes[quiz].chapter }}</p>
        </header>

        <!-- Quiz Controls -->
        <div class="quiz-controls">
            <div class="control-group">
                <label for="numQuestions">Number of Questions:</label>
                <select id="numQuestions">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="all">All ({{ quizzes[quiz].questions.length }})</option>
                </select>
            </div>
            <div class="control-group">
                <label for="quizMode">Mode:</label>
                <select id="quizMode">
                    <option value="practice">Practice (Show solutions)</option>
                    <option value="test">Test (Solutions at end)</option>
                </select>
            </div>
            <button id="startQuiz" class="btn">Start Quiz</button>
            <button id="resetQuiz" class="btn btn-secondary" style="display:none;">Reset Quiz</button>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container" style="display:none;">
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
            <div class="progress-text">Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span></div>
        </div>

        <!-- Quiz Content -->
        <div id="quizContent" class="quiz-content" style="display:none;">
            <div class="question-container">
                <h2 id="questionText"></h2>
                <div id="optionsContainer" class="options-container"></div>
                <div id="feedbackContainer" class="feedback-container" style="display:none;"></div>
            </div>
            
            <div class="navigation-buttons">
                <button id="prevQuestion" class="btn btn-secondary">Previous</button>
                <button id="submitAnswer" class="btn">Submit Answer</button>
                <button id="nextQuestion" class="btn btn-secondary">Next</button>
                <button id="showResults" class="btn" style="display:none;">Show Results</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="results-section" style="display:none;">
            <h2>Quiz Results</h2>
            <div class="score-display">
                <div class="score-circle">
                    <span id="scorePercentage">0%</span>
                </div>
                <div class="score-details">
                    <p>You got <span id="correctAnswers">0</span> out of <span id="totalAnswered">0</span> questions correct.</p>
                    <p id="scoreMessage"></p>
                </div>
            </div>
            
            <div class="results-summary">
                <h3>Question Review</h3>
                <div id="questionReview"></div>
            </div>
        </div>
    </main>

    <!-- Embed quiz data -->
    <script>
        window.quizData = {{ quizzes[quiz].questions | dump | safe }};
        window.quizTopic = "{{ quiz }}";
        window.quizTitle = "{{ quizzes[quiz].title }}";
    </script>

    <!-- Load unified quiz logic -->
    <script src="/assets/js/unified-quiz.js"></script>
