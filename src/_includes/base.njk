<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Skip to main content for accessibility -->
    <a class="skip-link" href="#main-content">Skip to main content</a>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - Physics Daily</title>
    
    <!-- CSS files with proper paths -->
    <link rel="stylesheet" href="/assets/css/global.css">
    <link rel="stylesheet" href="/assets/css/mcq-styles.css">
    {% if pageStyle %}
    <link rel="stylesheet" href="{{ pageStyle }}">
    {% endif %}
    
    <!-- Base uses site-wide global.css for styling to match existing UI -->

    <!-- Favicon -->
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
    
    <!-- Manifest for PWA -->
    <link rel="manifest" href="/manifest.webmanifest">
    
    <!-- Meta tags -->
    <meta name="description" content="{{ description or 'Comprehensive physics notes and study resources' }}">
    <meta name="theme-color" content="#1a202c">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XN081SR2KP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XN081SR2KP');
    </script>
    
    <!-- KaTeX for Math Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}]});"></script>
    
    <!-- Interactive Learning Components -->
    <link rel="stylesheet" href="/assets/css/interactive-components.css">
    <link rel="stylesheet" href="/assets/css/progress-tracker.css">
</head>
<body>
    <!-- Navigation (matches existing site classes) -->
    <nav class="nav">
        <div class="container">
            <div class="nav-content">
                <a href="/index.html" class="nav-logo">Physics Daily</a>
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-links">
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="/leaderboard.html">Leaderboard</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" aria-label="Topics Menu">Topics â–¼</a>
                        <ul class="dropdown-menu">
                            <li><a href="/mechanics/">Mechanics</a></li>
                            <li><a href="/thermodynamics/">Thermodynamics</a></li>
                            <li><a href="/electromagnetism/">Electromagnetism</a></li>
                            <li><a href="/waves/">Waves</a></li>
                            <li><a href="/optics/">Optics</a></li>
                            <li><a href="/modern/">Modern Physics</a></li>
                        </ul>
                    </li>
                    <li><a href="/resources.html">Resources</a></li>
                    <li><a href="/about.html">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
        {{ content | safe }}
    </main>

    <!-- Footer (simple footer consistent with existing UI) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="/index.html">Home</a>
                <a href="/resources.html">Resources</a>
                <a href="/about.html">About</a>
            </div>
            <p>&copy; 2024 Physics Daily. All rights reserved.</p>
        </div>
    </footer>

    <!-- Global JavaScript -->
    <script src="/assets/js/global.js"></script>
    <script src="/assets/js/active-learning.js"></script>
    <script src="/assets/js/physics-simulations.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
    <script src="/assets/js/progress-widget.js"></script>
    
    <!-- Progress Streak Display -->
    <div id="streak-display"></div>
    {% if pageScript %}
    <script src="{{ pageScript }}"></script>
    {% endif %}
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .catch(err => console.log('Service Worker registration failed:', err));
        });
      }
    </script>
</body>
</html>
